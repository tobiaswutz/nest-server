// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id        Int      @id @default(autoincrement())
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  firstName String
  lastName  String
  email     String @unique
  hash      String

  bookmarks         Bookmark[]
  transactions      Transaction[]
  transaction_lists TransactionList[]

  @@map("users")
}

model Bookmark {
  id        Int      @id @default(autoincrement())
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  title       String
  description String?
  link        String

  userId Int
  user   User @relation(fields: [userId], references: [id])

  @@map("bookmarks")
}

model TransactionList {
  id        Int      @id @default(autoincrement())
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  name        String
  description String?

  userId Int
  user   User @relation(fields: [userId], references: [id])

  transactions Transaction[]

  @@map("transaction_lists")
}

model Transaction {
  id        Int      @id @default(autoincrement())
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  userId            Int
  transactionListId Int

  inflowSymbol          String
  outflowSymbol         String
  inflowAmount          Decimal
  outflowAmount         Decimal
  inflowSymbolUsdPrice  Decimal
  outflowSymbolUsdPrice Decimal
  transactionTime       DateTime?
  feeSymbol             String?
  feeAmount             Decimal?
  description           String?
  walletAddress         String?
  tradingPlatform       String?
  transactionId         String?

  user            User            @relation(fields: [userId], references: [id])
  transactionList TransactionList @relation(fields: [transactionListId], references: [id])

  @@map("transactions")
}
